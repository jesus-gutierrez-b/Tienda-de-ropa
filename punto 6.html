<!DOCTYPE>
<HTML>
	<HEAD> 
		<TITLE> Suma y Resta punto 6 </TITLE> 
		<LINK Rel=stylesheet href="css/punto 6.css" type="text/css"> 
	</HEAD>	
	<BODY>
		<H2> Escriba sólo números binarios </H2>
		<FORM NAME="forma">
			<TABLE>
				<TD> <LABEL> Suma: </LABEL> </TD>
				<TD> <INPUT TYPE="text" NAME="num"> </TD>
				<TD> <LABEL> + </LABEL> </TD>
				<TD> <INPUT TYPE="text" NAME="num2"> </TD>
				<TD> <BUTTON TYPE="button" onclick="suma(num.value, num2.value)"> = </BUTTON> </TD>
				<TD> <LABEL id="add">  </LABEL> </TD>
				<TR>
				<TD> <LABEL> Resta: </LABEL> </TD>
				<TD> <INPUT TYPE="text" NAME="num3"> </TD>
				<TD> <LABEL> - </LABEL> </TD>
				<TD> <INPUT TYPE="text" NAME="num4"> </TD>
				<TD> <BUTTON TYPE="button" onclick="resta(num3.value, num4.value)"> = </BUTTON> </TD>
				<TD> <LABEL id="sus">  </LABEL> </TD>
			</TABLE>
		</FORM>
		<SCRIPT type="text/javascript">
			function suma(bin, bin2)
			{
				var arr;
				var arr2;
				var dec;
				var dec2;
				var rDec;
				var r;
				var c= true;
				if( isNaN(bin) || isNaN(bin2) || bin=="" || bin2=="" )
				{
					alert("Por favor, escriba sólo números");
				}
				else
				{
					arr=bin.split("");
					arr2=bin2.split("");
					for(i= arr.length-1; i>=0; i--)
					{
						if(arr[i]!=0 && arr[i]!=1)
						{
							alert("Por favor, escriba sólo ceros o unos");
							c=false;
							break;
						}//if
					}//for
					for(i= arr2.length-1; i>=0; i--)
					{
						if(arr2[i]!=0 && arr2[i]!=1)
						{
							alert("Por favor, escriba sólo ceros o unos");
							c=false;
							break;
						}//if
					}//for
					if(c)
					{
						dec= bin2dec(arr);
						dec2= bin2dec(arr2);
						rDec= dec+dec2;
						if(rDec==0){document.getElementById("add").innerHTML= 0;}
						else{
						r= dec2bin(rDec);
						document.getElementById("add").innerHTML= r;}
					}//if
				}//else
			}//suma			
			function resta(bin, bin2)
			{
				var arr;
				var arr2;
				var dec;
				var dec2;
				var rDec;
				var r;
				var c= true;
				if( isNaN(bin) || isNaN(bin2) || bin=="" || bin2=="" )
				{alert('por favor, escriba sólo números');}
				else
				{
					arr=bin.split("");
					arr2=bin2.split("");
					for(i= arr.length-1; i>=0; i--)
					{
						if(arr[i]!=0 && arr[i]!=1)
						{
							alert("Por favor, escriba sólo ceros o unos");
							c=false;
							break;
						}//if
					}//for
					for(i= arr2.length-1; i>=0; i--)
					{
						if(arr2[i]!=0 && arr2[i]!=1)
						{
							alert("Por favor, escriba sólo ceros o unos");
							c=false;
							break;
						}//if
					}//for
					if(c)
					{
						dec= bin2dec(arr);
						dec2= bin2dec(arr2);
						rDec= dec-dec2;
						if(rDec== 0){document.getElementById("sus").innerHTML= 0;}
						else{
						r= dec2bin(rDec);
						document.getElementById("sus").innerHTML= r;}
					}//if
				}//else
			}//resta
			function bin2dec(arr)
			{
				var b=1;
				var d=0;
				for(i= arr.length-1; i>=0; i--)
				{
					d+= b*arr[i];
					b*=2;	
				}//for	
				return d;				
			}//bin2dec
			function dec2bin(d)
			{
				var b="";
				if(d<0){d= d*(-1);}
				while(d>=1)
				{
					b+= d%2;
					d/= 2;
					d= parseInt(d);
				}//for
				return revCad(b);
			}//dec2bin
			function revCad(cad)
			{
				var l= cad.length-1;
				var r="";
				while(l>=0){r+= cad.charAt(l); l--;}
				return r;
			}
		</SCRIPT>
	</BODY>
</HTML>